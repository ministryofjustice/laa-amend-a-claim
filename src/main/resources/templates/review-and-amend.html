<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(
        title=#{claimReview.title},
        mainContent=~{::#main-content},
        pageCategory=${null},
        showBackLink=${true},
        backUrl=${backUrl}
    )}">
<body>
<main class="govuk-main-wrapper" id="main-content">
    <h1 class="govuk-heading-xl">
        <span th:text="#{claimReview.mainHeading}"></span>
    </h1>

    <p class="govuk-body">
        <strong th:text="#{claimReview.assessmentOutcome} "></strong>
        <span th:text="#{${(claim.assessmentOutcome != null) ? claim.assessmentOutcome.messageKey : 'claimValuesTable.noData'}}"></span>
    </p>

    <table class="govuk-table">
        <thead class="govuk-table__head">
            <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header" th:text="#{claimSummary.item}"></th>
                <th scope="col" class="govuk-table__header" th:text="#{claimSummary.calculated}"></th>
                <th scope="col" class="govuk-table__header" th:text="#{claimSummary.submitted}"></th>
                <th scope="col" class="govuk-table__header" th:text="#{claimSummary.amended}"></th>
                <th scope="col" class="govuk-table__header"></th>
            </tr>
        </thead>
        <tbody class="govuk-table__body">
            <tr class="govuk-table__row"
                th:each="row : ${viewModel.tableRows}"
                th:classappend="${viewModel.isTotalRow(row)} ? 'table-row--total' : ''"
                th:with="label=${row.label}">
                <td class="govuk-table__cell govuk-!-font-weight-bold" th:text="#{${label}}"></td>
                <th:block th:replace="~{partials/claim-field-value :: claimFieldValue(${row}, ${row.calculated})}"></th:block>
                <th:block th:replace="~{partials/claim-field-value :: claimFieldValue(${row}, ${row.submitted})}"></th:block>
                <th:block th:replace="~{partials/claim-field-value :: claimFieldValue(${row}, ${row.amended})}"></th:block>

                <td class="govuk-table__cell" th:if="${canAmendCosts}" th:classappend="${viewModel.getChangeUrl(row)} == null ? 'govuk-summary-list__row--no-actions' : ''">
                    <a th:if="${viewModel.getChangeUrl(row) != null && !(row.amended instanceof T(uk.gov.justice.laa.amend.claim.models.ClaimFieldValue.NeedsAdding))}"
                       th:href="${viewModel.getChangeUrl(row)}"
                       class="govuk-link govuk-link--no-visited-state"
                       th:text="#{service.change}"><th:span class="govuk-visually-hidden" th:text=" #{${label}}"></th:span></a>
                </td>
            </tr>
        </tbody>
    </table>

    <form th:action="@{/submissions/{submissionId}/claims/{claimId}/review/submit(submissionId=${submissionId}, claimId=${claimId})}" method="post" style="display: inline;">
        <button class="govuk-button govuk-!-margin-right-3" type="submit" data-module="govuk-button" th:text="#{claimReview.submit}"></button>
    </form>

    <form th:action="@{/submissions/{submissionId}/claims/{claimId}/review/discard(submissionId=${submissionId}, claimId=${claimId})}" method="post" style="display: inline;">
        <button class="govuk-button govuk-button--warning" type="submit" data-module="govuk-button" th:text="#{claimReview.discard}"></button>
    </form>
</main>
</body>
</html>
